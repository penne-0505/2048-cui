# 2048-CLI ビジュアル改善計画

## 設計方針決定事項

### 1. カラーテーマシステム

**採用方針**: テーマ切り替え機能を実装

- モダンテーマ: 鮮やかな色合いで現代的
- クラシックテーマ: 落ち着いた色合いで上品
- ゲーミングテーマ: 派手でエネルギッシュ
- 設定ファイルでテーマを選択可能にする

### 2. ボーダースタイル

**採用方針**: シンプルな線画文字を使用

**検討された選択肢**:

- ✅ **シンプル**: 綺麗な線画文字（Unicode box-drawing characters）
  - 理由: 読みやすく、多くの端末で互換性が高い
  - 実装: ┌─┐│└─┘などの文字を使用
  
- ❌ **装飾的**: 複雑な装飾パターン
  - 却下理由: 可読性が下がる可能性、文字幅の問題
  - 例: ╔═══╗ ║   ║ ╚═══╝ + 追加装飾
  
- ❌ **3D風**: 立体的に見える効果
  - 却下理由: ASCII環境では表現に限界、操作性重視
  - 例: 影付き効果、グラデーション風表現

### 3. アニメーション効果レベル

**採用方針**: 適度なアニメーション、ただし移動操作は最小限

**実装方針**:

- ✅ スコア変化時の`+ポイント`表示
- ✅ タイル合成時の短時間ハイライト
- ✅ ゲーム状態変化時の視覚効果
- ⚠️ 移動操作: 素早い操作を優先し、最小限の効果のみ

### 4. 実装優先順位

1. **高優先**: タイルの色とスタイル改善
2. **高優先**: ボードの装飾的なボーダー
3. **中優先**: スコア表示の改善
4. **低優先**: ゲーム画面全体のレイアウト

## 技術実装計画

### テーマシステム設計

```python
# themes.py
THEMES = {
    "modern": {
        "colors": {...},
        "style": {...}
    },
    "classic": {
        "colors": {...},
        "style": {...}
    },
    "gaming": {
        "colors": {...},
        "style": {...}
    }
}
```

### ボーダー文字セット

```text
シンプルボーダー用Unicode文字:
┌─┬─┐  上部
├─┼─┤  中間
└─┴─┘  下部
│     │  縦線
```

### カラーパレット拡張

- 現在: 基本的な256色対応
- 改善: RGB対応端末での豊富な色使い
- テーマ別の色調整機能

## 実装完了事項

### ✅ 1. テーマシステム (core/themes.py)

- 3つのテーマを実装: Modern, Classic, Gaming
- 各テーマに独自のカラーパレット、ボーダースタイル、UI色を設定
- 設定ファイルでテーマを保存・切り替え可能
- ゲーム中に't'キーでテーマを循環切り替え

### ✅ 2. 設定システム拡張 (core/config.py)

- テーマ設定をconfig.jsonに追加
- テーマ取得・設定関数を実装
- change_theme キーバインド追加

### ✅ 3. 視覚的改善 (ui/display.py)

- **装飾的なタイトル**: Unicode box-drawingキャラクターでフレーム
- **強化されたスコア表示**: カンマ区切り、最高タイル表示、進捗情報
- **プログレス・インジケーター**: 2048到達までの進捗バー
- **テーマ表示**: 現在のテーマ名を表示
- **幅広タイル**: より見やすい8文字幅タイル
- **テーマ化されたUI色**: 全UI要素が各テーマに対応

### ✅ 4. 高度なボーダーシステム

- **シンプルスタイル**: 標準的なbox-drawing文字
- **ラウンドスタイル**: 角丸効果のあるボーダー
- **ボールドスタイル**: 太線のボーダー
- 完全なグリッド描画（クロス、T字結合など）

### ✅ 5. アニメーションシステム (ui/animations.py)

- **スコア変化アニメーション**: +ポイント表示が上昇・フェード
- **タイル合成エフェクト**: 合成時の短時間ハイライト
- **グローバルアニメーター**: 全アニメーションを統合管理
- 移動操作に影響しない軽量な実装

### ✅ 6. ゲームロジック拡張 (game/game.py)

- 合成追跡機能：アニメーション用に最近の合成を記録
- recent_merges リストで合成位置・値を管理

### ✅ 7. キー表示システム更新 (core/key_display.py)

- "Change Theme"キーの説明を追加
- 自動的なキーヘルプ生成を維持

## テーマ詳細

### Modern テーマ

- 明るく現代的な色使い
- ラウンドボーダー
- シアン系タイトル、グリーン系スコア

### Classic テーマ

- 落ち着いた上品な色調
- シンプルボーダー
- ゴールド系UI色

### Gaming テーマ

- 鮮やかでエネルギッシュ
- ボールドボーダー
- マゼンタ系タイトル、イエロー系スコア

## 使用方法

1. `python src/main.py` でゲーム開始
2. ゲーム中に `t` キーでテーマ切り替え

## 技術的特徴

- 端末互換性重視
- エラーハンドリング完備
- 設定の後方互換性確保
- パフォーマンス影響最小限
