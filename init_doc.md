
# 2048-CLI ゲーム要件定義書

## 1. 概要

CUI/CLI環境で動作する2048ゲームを開発する。

## 2. ゲーム仕様

### 2.1. 盤面

- **サイズ**: 4x4を基本とする。
- **拡張性**: 将来的に他のサイズ（例: 3x3, 5x5）にも対応できるよう、内部構造を考慮する。

### 2.2. 操作方法

- 以下のキーでタイルを上下左右に移動させる。
  - **矢印キー**: ↑, ↓, ←, →
  - **WASDキー**: w, a, s, d

### 2.3. ゲームルール

- **勝利条件**:
  - いずれかのタイルが「2048」に到達した時点で一度「勝利」とする。
  - 勝利後もプレイヤーがゲームを継続するかを選択できる（エンドレスモード）。
- **敗北条件**:
  - 盤面に空きマスが存在しない。
  - かつ、どの方向にもタイルを移動または結合できない状態になった場合、「敗北」とする。
- **スコア計算**:
  - タイルが2つ結合された際、結合後の新しいタイルの数値をスコアに加算する。
  - (例: 4と4が結合して8になった場合、スコアが8点加算される)

### 2.4. タイルの出現ロジック

- プレイヤーがタイルを移動させるたびに、ランダムな空きマスに新しいタイルを1つ配置する。
- 新しいタイルの数値は、現在のスコアに応じて変動する。
  - **スコア < 2000**: 新しいタイルは常に「2」。
  - **スコア >= 2000**: スコアが2000増えるごとに、「4」が出現する確率が5%ずつ上昇する。それ以外の場合は「2」が出現する。
    - 例: スコア 4000-5999 の場合、「4」の出現率は10%。

## 3. UI/UX

### 3.1. 画面デザイン

- 提供されたデザイン案（`image.png`）に基づき、CUIで画面を構築する。
- タイルの数値ごとに背景色を変更し、視認性を高める。
- スコア、操作キーなどの情報を画面に常時表示する。

### 3.2. セーブ＆ロード機能

- **手動セーブ**:
  - プレイヤーは任意のタイミングでゲームの状態を保存できる。
  - 手動セーブ用に5つのスロットを用意する。
- **自動セーブ**:
  - プレイヤーがタイルを移動させるたびに、自動でゲームの状態を保存する。
  - 自動セーブ用に1つの専用スロットを用意する。
- **ゲーム開始時**:
  - 新しくゲームを始めるか、以前のセーブデータから再開するかを選択できるメニューを表示する。

## 4. 開発要件

### 4.1. 使用技術

- **プログラミング言語**: Python
- **UIライブラリ**: `curses` (Python標準ライブラリ)

### 4.2. 開発アプローチ

- まずは主要機能（ゲームロジック、基本UI）を実装したMVP（Minimum Viable Product）を開発する。
- その後、セーブ機能などの追加機能を実装していく。
